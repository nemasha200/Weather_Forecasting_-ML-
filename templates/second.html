<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Business Planning</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="bg-blue-50 min-h-screen">
  <nav class="bg-blue-800 text-white p-4 flex justify-between">
    <h1 class="text-xl font-bold">Business Planning</h1>
    <a href="/" class="hover:underline">üè† Back to Dashboard</a>
  </nav>

  <main class="p-8 space-y-6">
    <div class="grid grid-cols-2 gap-4">
      <div class="bg-white p-4 rounded shadow">
        <p class="text-gray-500">Temperature</p>
        <p id="temperature" class="text-xl font-bold">-- ¬∞C</p>
      </div>
      <div class="bg-white p-4 rounded shadow">
        <p class="text-gray-500">Rainfall</p>
        <p id="rainfall" class="text-xl font-bold">-- mm</p>
      </div>
      <div class="bg-white p-4 rounded shadow">
        <p class="text-gray-500">Humidity</p>
        <p id="humidity" class="text-xl font-bold">-- %</p>
      </div>
      <div class="bg-white p-4 rounded shadow">
        <p class="text-gray-500">Wind Speed</p>
        <p id="wind_speed" class="text-xl font-bold">-- km/h</p>
      </div>
    </div>

    <h2 class="text-xl font-bold">Forecast</h2>
    <canvas id="forecastChart" height="100"></canvas>
  </main>

  <script>
    fetch('/api/weather')
      .then(res => res.json())
      .then(data => {
        document.getElementById("temperature").textContent = `${data.temperature} ¬∞C`;
        document.getElementById("rainfall").textContent = `${data.rainfall} mm`;
        document.getElementById("humidity").textContent = `${data.humidity} %`;
        document.getElementById("wind_speed").textContent = `${data.wind_speed} km/h`;

        const ctx = document.getElementById('forecastChart').getContext('2d');
        new Chart(ctx, {
          type: 'bar',
          data: {
            labels: data.forecast.days,
            datasets: [
              {
                label: 'Temperature (¬∞C)',
                data: data.forecast.temperature,
                backgroundColor: 'rgba(59, 130, 246, 0.5)'
              },
              {
                label: 'Rainfall (mm)',
                data: data.forecast.rainfall,
                backgroundColor: 'rgba(34, 197, 94, 0.5)'
              }
            ]
          },
          options: { responsive: true }
        });
      });
  </script>
</body>
</html>
